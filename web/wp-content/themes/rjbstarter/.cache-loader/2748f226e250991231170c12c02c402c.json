{"remainingRequest":"/app/web/wp-content/themes/rjbstarter/node_modules/buble-loader/index.js??ref--2-1!/app/web/wp-content/themes/rjbstarter/node_modules/eslint-loader/index.js!/app/web/wp-content/themes/rjbstarter/node_modules/import-glob/index.js!/app/web/wp-content/themes/rjbstarter/resources/assets/scripts/routes/templateDataAccess.js","dependencies":[{"path":"/app/web/wp-content/themes/rjbstarter/resources/assets/scripts/routes/templateDataAccess.js","mtime":1621092283139},{"path":"/app/web/wp-content/themes/rjbstarter/node_modules/cache-loader/dist/cjs.js","mtime":1614026150860},{"path":"/app/web/wp-content/themes/rjbstarter/node_modules/buble-loader/index.js","mtime":1614026150074},{"path":"/app/web/wp-content/themes/rjbstarter/node_modules/eslint-loader/index.js","mtime":1614026153282},{"path":"/app/web/wp-content/themes/rjbstarter/node_modules/import-glob/index.js","mtime":1614026155945}],"contextDependencies":[],"result":["export default {\n  init: function init() {\n    if ( $( '[data-iframe=\"data-access\"]' ).length ) {\n      var $element = $( '[data-iframe=\"data-access\"]' );\n      var $spinner = $element.find( '.spinner' );\n      // Run this in an interval (every 0.1s) just in case we are still waiting for consent\n      var cnt = 0;\n      var consentSetInterval = setInterval(function(){\n        cnt += 1;\n        // Bail if we have not gotten a consent response after 30 seconds.\n        if( cnt >= 140 )\n          { clearInterval(consentSetInterval); }\n\n        if( typeof window.__tcfapi !== 'undefined' ) { // Check if window.__tcfapi has been set\n          clearInterval( consentSetInterval );\n\n          window.__uspapi( 'uspPing', 1, function( obj, status ) {\n            if (status && obj.mode.includes('USP') && obj.jurisdiction.includes(obj.location.toUpperCase()) && $element !== null) {\n              $.ajax({\n                type: 'POST',\n                url: ajax_object.ajax_url,\n                data: {\n                  action: 'privacy_data_access_ccpa',\n                  security: ajax_object.ajax_nonce,\n                },\n                error: function (errorThrown) {\n                  console.log(errorThrown);\n                },\n                success: function( res ) {\n                  var retObj = JSON.parse(res);\n                  if( retObj.success ) {\n                    // on success, display the returned html in the data access dom element.\n                    $spinner.remove();\n                    $($element).html(retObj.html);\n                  }\n                  else {\n                    $($element).html('There was an error determining your jurisdiction, please refresh the page to try again.');\n                  }\n                },\n              });\n            }\n\n            else {\n              $.ajax({\n                type: 'POST',\n                url: ajax_object.ajax_url,\n                data: {\n                  action: 'privacy_data_access_gdpr',\n                  security: ajax_object.ajax_nonce,\n                },\n                error: function (errorThrown) {\n                  console.log(errorThrown);\n                },\n                success: function( res ) {\n                  var retObj = JSON.parse(res);\n                  if( retObj.success ) {\n                    // on success, display the returned html in the data access dom element.\n                    $spinner.remove();\n                    $($element).html(retObj.html);\n                  }\n                  else {\n                    $($element).html('There was an error determining your jurisdiction, please refresh the page to try again.');\n                  }\n                },\n              });\n            }\n          });\n        }\n        cnt++;\n      }, 100);\n    }\n  },\n\n  finalize: function finalize() {\n    // JavaScript to be fired on the home page, after the init JS\n  },\n};\n",{"version":3,"file":"/app/web/wp-content/themes/rjbstarter/resources/assets/scripts/routes/templateDataAccess.js","sources":["resources/assets/scripts/routes/templateDataAccess.js"],"sourcesContent":["export default {\n  init() {\n    if ( $( '[data-iframe=\"data-access\"]' ).length ) {\n      var $element = $( '[data-iframe=\"data-access\"]' );\n      var $spinner = $element.find( '.spinner' );\n      // Run this in an interval (every 0.1s) just in case we are still waiting for consent\n      var cnt = 0;\n      var consentSetInterval = setInterval(function(){\n        cnt += 1;\n        // Bail if we have not gotten a consent response after 30 seconds.\n        if( cnt >= 140 )\n          clearInterval(consentSetInterval);\n\n        if( typeof window.__tcfapi !== 'undefined' ) { // Check if window.__tcfapi has been set\n          clearInterval( consentSetInterval );\n\n          window.__uspapi( 'uspPing', 1, function( obj, status ) {\n            if (status && obj.mode.includes('USP') && obj.jurisdiction.includes(obj.location.toUpperCase()) && $element !== null) {\n              $.ajax({\n                type: 'POST',\n                url: ajax_object.ajax_url,\n                data: {\n                  action: 'privacy_data_access_ccpa',\n                  security: ajax_object.ajax_nonce,\n                },\n                error: function (errorThrown) {\n                  console.log(errorThrown);\n                },\n                success: function( res ) {\n                  var retObj = JSON.parse(res);\n                  if( retObj.success ) {\n                    // on success, display the returned html in the data access dom element.\n                    $spinner.remove();\n                    $($element).html(retObj.html);\n                  }\n                  else {\n                    $($element).html('There was an error determining your jurisdiction, please refresh the page to try again.');\n                  }\n                },\n              });\n            }\n\n            else {\n              $.ajax({\n                type: 'POST',\n                url: ajax_object.ajax_url,\n                data: {\n                  action: 'privacy_data_access_gdpr',\n                  security: ajax_object.ajax_nonce,\n                },\n                error: function (errorThrown) {\n                  console.log(errorThrown);\n                },\n                success: function( res ) {\n                  var retObj = JSON.parse(res);\n                  if( retObj.success ) {\n                    // on success, display the returned html in the data access dom element.\n                    $spinner.remove();\n                    $($element).html(retObj.html);\n                  }\n                  else {\n                    $($element).html('There was an error determining your jurisdiction, please refresh the page to try again.');\n                  }\n                },\n              });\n            }\n          });\n        }\n        cnt++;\n      }, 100);\n    }\n  },\n\n  finalize() {\n    // JavaScript to be fired on the home page, after the init JS\n  },\n};\n"],"names":[],"mappings":"AAAA,eAAe;EACb,IAAI,eAAA,GAAG;IACL,KAAK,CAAC,EAAE,6BAA6B,EAAE,CAAC,MAAM,GAAG;MAC/C,IAAI,QAAQ,GAAG,CAAC,EAAE,6BAA6B,EAAE,CAAC;MAClD,IAAI,QAAQ,GAAG,QAAQ,CAAC,IAAI,EAAE,UAAU,EAAE,CAAC;;MAE3C,IAAI,GAAG,GAAG,CAAC,CAAC;MACZ,IAAI,kBAAkB,GAAG,WAAW,CAAC,UAAU;QAC7C,GAAG,IAAI,CAAC,CAAC;;QAET,IAAI,GAAG,IAAI,GAAG;UACZ,EAAA,aAAa,CAAC,kBAAkB,CAAC,CAAC,EAAA;;QAEpC,IAAI,OAAO,MAAM,CAAC,QAAQ,KAAK,WAAW,GAAG;UAC3C,aAAa,EAAE,kBAAkB,EAAE,CAAC;;UAEpC,MAAM,CAAC,QAAQ,EAAE,SAAS,EAAE,CAAC,EAAE,UAAU,GAAG,EAAE,MAAM,GAAG;YACrD,IAAI,MAAM,IAAI,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,GAAG,CAAC,YAAY,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,IAAI,QAAQ,KAAK,IAAI,EAAE;cACpH,CAAC,CAAC,IAAI,CAAC;gBACL,IAAI,EAAE,MAAM;gBACZ,GAAG,EAAE,WAAW,CAAC,QAAQ;gBACzB,IAAI,EAAE;kBACJ,MAAM,EAAE,0BAA0B;kBAClC,QAAQ,EAAE,WAAW,CAAC,UAAU;iBACjC;gBACD,KAAK,EAAE,UAAU,WAAW,EAAE;kBAC5B,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;iBAC1B;gBACD,OAAO,EAAE,UAAU,GAAG,GAAG;kBACvB,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;kBAC7B,IAAI,MAAM,CAAC,OAAO,GAAG;;oBAEnB,QAAQ,CAAC,MAAM,EAAE,CAAC;oBAClB,CAAC,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;mBAC/B;uBACI;oBACH,CAAC,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,yFAAyF,CAAC,CAAC;mBAC7G;iBACF;eACF,CAAC,CAAC;aACJ;;iBAEI;cACH,CAAC,CAAC,IAAI,CAAC;gBACL,IAAI,EAAE,MAAM;gBACZ,GAAG,EAAE,WAAW,CAAC,QAAQ;gBACzB,IAAI,EAAE;kBACJ,MAAM,EAAE,0BAA0B;kBAClC,QAAQ,EAAE,WAAW,CAAC,UAAU;iBACjC;gBACD,KAAK,EAAE,UAAU,WAAW,EAAE;kBAC5B,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;iBAC1B;gBACD,OAAO,EAAE,UAAU,GAAG,GAAG;kBACvB,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;kBAC7B,IAAI,MAAM,CAAC,OAAO,GAAG;;oBAEnB,QAAQ,CAAC,MAAM,EAAE,CAAC;oBAClB,CAAC,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;mBAC/B;uBACI;oBACH,CAAC,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,yFAAyF,CAAC,CAAC;mBAC7G;iBACF;eACF,CAAC,CAAC;aACJ;WACF,CAAC,CAAC;SACJ;QACD,GAAG,EAAE,CAAC;OACP,EAAE,GAAG,CAAC,CAAC;KACT;GACF;;EAED,QAAQ,mBAAA,GAAG;;GAEV;CACF,CAAC;","sourceRoot":"/app/web/wp-content/themes/rjbstarter"}]}